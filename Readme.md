# 各種モジュール Readme
こちらはBve5,6用のモジュールである。
## 生い立ち
Unicorn様がかつて公開されていたモジュールパックをライセンスのもと書き直し、一般化、x64対応としたもの。書き直しを行ったものはGPLを解除して提供を行っている（残りも順次解除予定）。

## 構成ファイル
### 定速プラグイン(L)
- `CSC_25ND_55P5.dll`(x86)
- `CSC_25ND_55P5_x64.dll`(x64)

ハンドル式定速プラグインである。このプラグインは最後に読み込むこと。なお、ボタン式のものは別途公開しているため、そちらを使用すること。設定項目は、**有効速度帯**，**表示灯インデックス**ならびに**マスコンキーに連動してボタン定速とハンドル定速を切り替えるかの設定**である。

#### INIファイル詳細
| Field                | Brief           | Value |
|----------------------|-----------------|-------:|
| **[Config]**               |                 |       |
| CSpdEnableSpd        | 有効になる速度         | 55    |
| CSpdDisableSpd       | 無効になる速度         | 53    |
| CSpdND               | ハンドル定速閾値        | 25    |
| CSpdNotch            | 定速ノッチ           | 5     |
| ReturnOnly           | 戻しノッチ以外でも有効にするか[1.] | 1     |
| **[Index]**                |                 |       |
| ConstantSpeedControl | 定速表示灯[2.]           | 100   |
| **[MetroPI]**              |                 |       |
| MasconKey            | マスコンキー[3.]          | 92    |

1. `0`とするとP1からの進段の際もP2で定速が有効になる。
2. 表示値はマスコンキーの番号である。定速表示灯の位置が社局ごとにずれる場合は、`DigitalNumber`で設定するとよい。
3. なお、マスコンキーが`6`の場合にのみボタン定速となる。負値はボタン定速固定、`256`以上はハンドル定速固定となる。

### 勾配起動プラグイン
- `HillStartAssist.dll`(x86)
- `HillStartAssist_x64.dll`(x64)

勾配起動プラグインである。設定項目は**ボタンインデックス**と**押下時にかかるブレーキ段数**である。

#### INIファイル詳細
| Field      | Brief   | Value |
|------------|---------|-------:|
| **[Config]**     |         |       |
| BrakeNotch | ブレーキノッチ | 3     |
| Key        | 勾配起動キー  | S     |

### 転動防止プラグイン
- `RollingProtectBrake.dll`(x86)
- `RollingProtectBrake_x64.dll`(x64)


停車中にブレーキをかけ続けるプラグインである。設定項目は**表示灯の仕様、表示可否**，**転動防止ブレーキの段数**，**パイロットランプ**である。

#### INIファイル詳細
| Field      | Brief    | Value |
|------------|----------|-------:|
| **[Config]**     |          |       |
| BrakeNotch | ブレーキノッチ  | 7     |
| PilotLamp  | パイロットランプ[1.] | -1    |
| Type       | 表示灯タイプ   | 1     |
| **[Index]**      |          |       |
| Indicator  | 転動防止表示灯  | 98    |

1. `-1`とすると本体のパイロットランプに連動する。`0`以上の値にするとその番号のインデックスに連動する。

### EB装置プラグイン
- `EB.dll`(x86)
- `EB_x64.dll`(x64)

EB装置のプラグインであるが、**ATS-S搭載車におけるATS動作表示灯との連動，社局切換車における社局ごとの使用可否**に対応していることが特徴である。設定項目は上記に加え、**ボタンインデックス**，**表示灯**，**点滅間隔**である。

#### INIファイル詳細
| Field      | Brief       | Value |
|------------|-------------|-------:|
| **[Index]**      |             |       |
| Blinking   | 点滅灯         | 1     |
| Lighting   | 点灯灯         | 13    |
| Buzzer     | EBブザー       | 13    |
| SW         | EBスイッチ      | 20    |
| **[SN]**         |             |       |
| UseSN      | ATS-S表示灯と兼用[1.] | 1     |
| **[MetroPI]**    |             |       |
| UseMetroPI | メトロPIと兼用    | 0     |
| MasConKey  | マスコンキー      | 92    |
| Empty      | 各社局での使用可否[2.]   | 0     |
| Metro      |             | 0     |
| Tobu       |             | 1     |
| Tokyu      |             | 0     |
| Seibu      |             | 1     |
| Sotetsu    |             | 1     |
| JR         |             | 1     |
| Odakyu     |             | 1     |
| Toyo       |             | 0     |
| **[Emulate]**    |             |       |
| Pitch      | 点滅間隔        | 375   |
| **[Key]**        |             |       |
| Switch     | スイッチ        | A2    |

1. オンにすると`ats0`，並びに`ats1`がSnと連動して動くようになる。点滅間隔をSnのプラグインと同じにすることを推奨する。
2. `1`を設定した番号のマスコンキー使用時のみEB装置が作動する。

### ワイパープラグイン
- `WIPER.dll`(x86)
- `WIPER_x64.dll`(x64)

ワイパーのプラグインである。設定項目は**各種インデックス**と**周期**である。

#### INIファイル詳細
| Field   | Brief  | Value |
|---------|--------|-------:|
| **[Index]**   |        |       |
| Left    | 左ワイパー  | 96    |
| Right   | 右ワイパー  | 97    |
| ON      | ワイパーオン | 200   |
| OFF     | ワイパーオフ | 201   |
| **[Emulate]** |        |       |
| Pitch   | 周期   | 1087  |
| **[Key]**     |        |       |
| Switch  | スイッチ   | K     |


### 日付プラグイン(L)
当方で公開している。後のバージョンにて統合予定。

### 回生開放プラグイン(L)
当方の車両に同梱している。後に一般公開予定。

### 乗降促進プラグイン(L)
当方で公開している。後のバージョンにて統合予定。

### ドア半自動扱いプラグイン
同梱していない。[CT様](http://ct813.sakura.ne.jp/bve.html)の車掌プラグイン、あるいは[AtsEX](https://automatic9045.github.io/contents/bve/AtsEX/)を利用のこと。

### デッドマン装置プラグイン
同梱していない。外部マスコンの制御は技術不足のため、また、キーボードのキーを使ったデッドマン装置は実際の運転感からずれ、ストレスの原因となるため公開は予定していない。

## ライセンス
基本的にはGPL v3に準ずる。プラグインの改変・再配布は自由だが、ソースコードを同梱しなければならない。

**Lの付してあるプラグインはGPLではない**。何かしらのライセンスを設定しているわけではないが、単体での再配布は不可。
車両データに同封する場合、事前連絡不要。なお当方の把握のため、事後に必ず連絡すること。

## Author
- Twitter [@16000land](https://twitter.com/16000land)
- Web [ろくらいんの部屋](susline2320.github.io)
- Mail [GMail](mailto:chiyoda16122@gmail.com)